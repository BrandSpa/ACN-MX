;(function(b,f,g){var h=b(g);b(f);var c=f.hydrogen=f.hydrogen||{};b.extend(c,{Project:function(a,d){this.element=b(a);return this.init(d)}});c.Project.PopupControls=b('<div class="project-controls"><ul><li><button class="mfp-prevent-close" data-action="prev"><i class="mfp-prevent-close fa fa-arrow-left"></i></button></li><li><button data-action="close"><i class="fa fa-times"></i></button></li><li><button class="mfp-prevent-close" data-action="next"><i class="mfp-prevent-close fa fa-arrow-right"></i></button></li></ul></div>');c.Project.prototype={defaults:{loader:{requestUrl:null,requestData:{},afterLoad:b.noop}},init:function(a){this.options=b.extend(!0,{},this.defaults,a);this.element.imagesLoaded(b.proxy(function(){this.element.addClass("loaded");this.initializeLayout();this.bindHandlers()},this))},initializeLayout:function(){this.element.find(".items").isotope({masonry:{columnSize:".grid-sizer",gutter:".gutter-sizer"},itemSelector:".project",transitionDuration:"0.5s"})},bindHandlers:function(){var a=this;this.element.on("click",".filter a[data-filter]",function(d){b(this).closest("li").addClass("active").siblings().removeClass("active");a.element.find(".items").isotope({filter:b(this).data("filter")}).end().find(".filter .active-label").html(this.innerHTML);d.preventDefault()}).on("click",".project .actions .mfp-details.is-ajax > a, .project .project-image > a.is-ajax",function(d){var e=b(this).closest(".project"),c=e.siblings(".project").addBack().filter(function(){return!!b(this).find(".actions .mfp-details.is-ajax > a, .project-image > a.is-ajax").length}),e=c.index(e);a.openProjectPopup(a.getProjectUrls(c),e);d.preventDefault()}).on("click",".project-load-more a",function(d){if(a.options.loader.requestUrl){var e=b(this).closest(".project-load-more"),c=b.isFunction(a.options.loader.requestData)?a.options.loader.requestData.apply(a.element[0]):a.options.loader.requestData,f=a.options.loader.afterLoad;b.getJSON(a.options.loader.requestUrl,c,function(d){switch(d.status){case "finished":e.remove();case "success":a.appendProjectItems(b(d.html).find(".items .project"),f);break;case "error":console.log(d.message)}})}d.preventDefault()})},appendProjectItems:function(a,d){var c=this;a&&a.length&&c.element.find(".items").append(a.hide()).imagesLoaded(function(){b(this).isotope("insert",a.show());b.isFunction(d)&&d.apply(c.element[0])})},openProjectPopup:function(a,d){a.length&&(b.fn.mfpFastClick&&!c.Project.hasFastClick&&(c.Project.hasFastClick=!0,c.Project.PopupControls.find("button").each(function(){var a=b.magnificPopup.instance[b(this).data("action")];"function"==typeof a&&b(this).mfpFastClick(a)})),b.magnificPopup.open({items:a,type:"ajax",gallery:{enabled:!0,arrows:!1},ajax:{settings:{cache:!1}},alignTop:!0,showCloseBtn:!1,mainClass:"project-details-popup",callbacks:{open:function(){h.off("keydown.mfp-gallery")},parseAjax:function(a){var d=b(a.data).find(".section.project-details").first();d.length?(d.find(".project-title").before(c.Project.PopupControls),a.data=d):a.data=""},ajaxContentAdded:this.initPopup,beforeChange:this.teardownPopup,beforeClose:this.teardownPopup}},Math.max(0,d)))},getProjectUrls:function(a){return a.map(function(){var a;a=b(this).find(".actions .mfp-details.is-ajax > a, .project-image > a.is-ajax");if(a.length&&(a=a.attr("href"))&&"#"!=a)return{type:"ajax",src:a}}).get()},initPopup:function(){this.content&&b.isFunction(c.setup)&&c.setup(this.content)},teardownPopup:function(){this.content&&b.isFunction(c.teardown)&&c.teardown(this.content);c.Project.PopupControls.detach()}}})(jQuery,window,document);